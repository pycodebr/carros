{% extends "base.html" %}

{% block title %}Carros Dispon√≠veis - PycodeBR Multimarcas{% endblock %}

{% block content %}
  <div class="page-header">
    <h1 class="page-title">Carros Dispon√≠veis</h1>
    <p class="page-subtitle">Explore nossa cole√ß√£o premium de ve√≠culos</p>
  </div>

  <form method="GET" action="{% url 'cars_list' %}" class="search-form">
    <input type="text" name="search" placeholder="Buscar por marca, modelo..." class="form-input" value="{{ request.GET.search }}">
    <button type="submit" class="btn btn-primary">
      <span>üîç</span>
      Buscar
    </button>
  </form>

  {% if cars %}
    <div class="car-grid">
      {% for car in cars %}
        <a href="{% url 'car_detail' car.pk %}" class="animate-fade-in">
          <article class="car-card">
            <div class="car-card-image">
              {% if car.photo %}
                <img src="{{ car.photo.url }}" alt="{{ car.brand }} {{ car.model }}" loading="lazy">
              {% else %}
                <div class="no-photo">
                  <span>üì∑</span>
                  <p>Foto n√£o dispon√≠vel</p>
                </div>
              {% endif %}
              <div class="car-card-overlay"></div>
            </div>
            
            <div class="car-card-content">
              <h2>{{ car.brand }} {{ car.model }}</h2>
              
              <div class="car-card-details">
                <span class="car-card-year">{{ car.factory_year }}</span>
                <span class="car-card-price">R$ {{ car.value|floatformat:2 }}</span>
              </div>
            </div>
          </article>
        </a>
      {% endfor %}
    </div>
  {% else %}
    <div class="text-center mt-4">
      <div class="card" style="max-width: 500px; margin: 0 auto;">
        <div class="card-body">
          <h3>üöó Nenhum carro encontrado</h3>
          <p class="text-muted">
            {% if request.GET.search %}
              N√£o encontramos carros com o termo "{{ request.GET.search }}". Tente uma busca diferente.
            {% else %}
              N√£o h√° carros cadastrados no momento.
            {% endif %}
          </p>
          {% if request.GET.search %}
            <a href="{% url 'cars_list' %}" class="btn btn-outline">Ver todos os carros</a>
          {% endif %}
        </div>
      </div>
    </div>
  {% endif %}
{% endblock %}